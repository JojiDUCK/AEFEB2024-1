<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Combined Version</title>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Lexend', sans-serif;
      background-color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    .header-container {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
    }

    .centered-text {
      font-size: 25px;
      text-align: center;
      margin: 0 20px;
    }

    .content-section {
      width: 100%;
      max-width: 600px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }

    .sentence-container,
    .follow-up-container,
    .final-container {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .sentence-image, .follow-up-image, .final-image {
      width: 40px;
      height: 40px;
      margin-right: 10px;
      object-fit: cover;
    }

    .sentence, .follow-up-sentence, .final-sentence {
      font-size: 20px;
      text-align: left;
    }

    .highlight {
      background-color: yellow;
      transition: background-color 0.2s ease;
    }

    .clicked-highlight {
      background-color: lightblue;
      transition: background-color 0.3s ease;
    }

    .section-heading {
      font-size: 22px;
      font-weight: bold;
      margin-top: 20px;
      text-align: left;
      width: 100%;
      max-width: 600px;
    }

    .audio-button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }

    .audio-button:hover {
      background-color: #45a049;
    }

    .question-block {
      margin-top: 20px;
      font-size: 20px;
      line-height: 1.6;
      text-align: left;
      width: 100%;
      max-width: 600px;
    }

    .answers {
      margin-left: 20px;
      display: flex;
      justify-content: space-between;
      gap: 20px;
    }

    .answers span {
      font-weight: bold;
    }

    .green-text {
      color: green;
    }

    .word-list {
      margin-top: 20px;
      width: 100%;
      max-width: 600px;
      position: relative;
      text-align: left;
    }

    .word-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      font-size: 20px;
    }

    .word-item img {
      width: 50px;
      height: 50px;
      object-fit: cover;
      cursor: pointer;
    }

    .word-item div {
      cursor: pointer;
    }
  </style>
</head>
<body>
  <!-- Header Section -->
  <div class="header-container">
    <img src="https://raw.githubusercontent.com/JojiDUCK/AEFEB2024-1/main/lion.png" alt="Left Image" class="image">
    <div class="centered-text">Have you...</div>
    <img src="https://raw.githubusercontent.com/JojiDUCK/AEFEB2024-1/main/panda.png" alt="Right Image" class="image">
  </div>

  <!-- Content Section -->
  <div class="content-section" id="text-to-read">
    <div class="sentence-container">
      <img src="https://raw.githubusercontent.com/JojiDUCK/AEFEB2024-1/main/jan.png" alt="Jan Image" class="sentence-image">
      <div class="sentence" data-sentence="Sam, have you ever seen a panda in a zoo?">
        <span class="word" onclick="readWord(this)">Sam</span>,
        <span class="word" onclick="readWord(this)">have</span>
        <span class="word" onclick="readWord(this)">you</span>
        <span class="word" onclick="readWord(this)">ever</span>
        <span class="word" onclick="readWord(this)">seen</span>
        <span class="word" onclick="readWord(this)">a</span>
        <span class="word" onclick="readWord(this)">panda</span>
        <span class="word" onclick="readWord(this)">in</span>
        <span class="word" onclick="readWord(this)">a</span>
        <span class="word" onclick="readWord(this)">zoo</span>?
      </div>
    </div>
    <div class="follow-up-container">
      <div class="sentence" data-sentence="Yes, I have, but I have never seen a panda in the forest.">
        <span class="word" onclick="readWord(this)">Yes</span>,
        <span class="word" onclick="readWord(this)">I</span>
        <span class="word" onclick="readWord(this)">have</span>,
        <span class="word" onclick="readWord(this)">but</span>
        <span class="word" onclick="readWord(this)">I</span>
        <span class="word" onclick="readWord(this)">have</span>
        <span class="word" onclick="readWord(this)">never</span>
        <span class="word" onclick="readWord(this)">seen</span>
        <span class="word" onclick="readWord(this)">a</span>
        <span class="word" onclick="readWord(this)">panda</span>
        <span class="word" onclick="readWord(this)">in</span>
        <span class="word" onclick="readWord(this)">the</span>
        <span class="word" onclick="readWord(this)">forest</span>.
      </div>
      <img src="https://raw.githubusercontent.com/JojiDUCK/AEFEB2024-1/main/sam.png" alt="Sam Image" class="follow-up-image">
    </div>
    <div class="final-container">
      <img src="https://raw.githubusercontent.com/JojiDUCK/AEFEB2024-1/main/jan.png" alt="Jan Image" class="final-image">
      <div class="sentence" data-sentence="Me too! I want to see one in the wild.">
        <span class="word" onclick="readWord(this)">Me</span>
        <span class="word" onclick="readWord(this)">too</span>!
        <span class="word" onclick="readWord(this)">I</span>
        <span class="word" onclick="readWord(this)">want</span>
        <span class="word" onclick="readWord(this)">to</span>
        <span class="word" onclick="readWord(this)">see</span>
        <span class="word" onclick="readWord(this)">one</span>
        <span class="word" onclick="readWord(this)">in</span>
        <span class="word" onclick="readWord(this)">the</span>
        <span class="word" onclick="readWord(this)">wild</span>.
      </div>
    </div>
  </div>

  <!-- Audio Button -->
  <button class="audio-button" onclick="readAndHighlight()">Play Audio</button>

  <!-- Question Section -->
  <div class="section-heading">Answer the questions.</div>
  <div class="question-block" id="answer-section">
    <div class="question">
      1. <span class="word" onclick="readWord(this)">What</span> <span class="word" onclick="readWord(this)">has</span> <span class="word" onclick="readWord(this)">Sam</span> <span class="word" onclick="readWord(this)">seen</span>?
      <div class="answers">
        <span>a. <span class="word green-text" onclick="readWord(this)">panda</span></span>
        <span>b. <span class="word" onclick="readWord(this)">dinosaur</span></span>
        <span>c. <span class="word" onclick="readWord(this)">dog</span></span>
      </div>
      <div class="explanation"><span class="word" onclick="readWord(this)">Sam</span> <span class="word" onclick="readWord(this)">has</span> <span class="word" onclick="readWord(this)">seen</span> <span class="word green-text" onclick="readWord(this)">a</span> <span class="word green-text" onclick="readWord(this)">panda</span>.</div>
    </div>
    <div class="question">
      2. <span class="word" onclick="readWord(this)">What</span> <span class="word" onclick="readWord(this)">has</span> <span class="word" onclick="readWord(this)">Jan</span> <span class="word" onclick="readWord(this)">never</span> <span class="word" onclick="readWord(this)">seen</span>?
      <div class="answers">
        <span>a. <span class="word green-text" onclick="readWord(this)">a</span> <span class="word green-text" onclick="readWord(this)">panda</span> <span class="word green-text" onclick="readWord(this)">in</span> <span class="word green-text" onclick="readWord(this)">the</span> <span class="word green-text" onclick="readWord(this)">wild</span></span>
        <span>b. <span class="word" onclick="readWord(this)">a</span> <span class="word" onclick="readWord(this)">cat</span> <span class="word" onclick="readWord(this)">in</span> <span class="word" onclick="readWord(this)">the</span> <span class="word" onclick="readWord(this)">wild</span></span>
        <span>c. <span class="word" onclick="readWord(this)">a</span> <span class="word" onclick="readWord(this)">rabbit</span> <span class="word" onclick="readWord(this)">in</span> <span class="word" onclick="readWord(this)">the</span> <span class="word" onclick="readWord(this)">wild</span></span>
      </div>
      <div class="explanation"><span class="word" onclick="readWord(this)">Jan</span> <span class="word" onclick="readWord(this)">has</span> <span class="word" onclick="readWord(this)">never</span> <span class="word" onclick="readWord(this)">seen</span> <span class="word green-text" onclick="readWord(this)">a</span> <span class="word green-text" onclick="readWord(this)">panda</span> <span class="word green-text" onclick="readWord(this)">in</span> <span class="word green-text" onclick="readWord(this)">the</span> <span class="word green-text" onclick="readWord(this)">wild</span>.</div>
    </div>
  </div>

  <!-- Play Audio Button -->
  <button class="audio-button" onclick="playAnswerAudio()">Play Audio</button>

  <!-- Unscramble Section -->
  <div class="section-heading">Unscramble, spell, and match.</div>
  <div class="word-list">
    <div class="word-item">
      <div onclick="readWord(this)">dog</div>
      <img src="https://raw.githubusercontent.com/JojiDUCK/AEFEB2024-1/main/dog.png" alt="Dog" onclick="readWordImage('dog')">
    </div>
    <div class="word-item">
      <div onclick="readWord(this)">snake</div>
      <img src="https://raw.githubusercontent.com/JojiDUCK/AEFEB2024-1/main/snake.png" alt="Snake" onclick="readWordImage('snake')">
    </div>
    <div class="word-item">
      <div onclick="readWord(this)">tiger</div>
      <img src="https://raw.githubusercontent.com/JojiDUCK/AEFEB2024-1/main/tiger.png" alt="Tiger" onclick="readWordImage('tiger')">
    </div>
    <div class="word-item">
      <div onclick="readWord(this)">mantis</div>
      <img src="https://raw.githubusercontent.com/JojiDUCK/AEFEB2024-1/main/mantis.png" alt="Mantis" onclick="readWordImage('mantis')">
    </div>
  </div>

  <script>
    let voices = [];
    function loadVoices() {
      voices = window.speechSynthesis.getVoices();
    }
    window.speechSynthesis.onvoiceschanged = loadVoices;

    function readAndHighlight() {
      const sentences = Array.from(document.querySelectorAll(".sentence"));
      const femaleVoice = voices.find(voice => voice.name === "Samantha");
      const maleVoice = voices.find(voice => voice.name === "Aaron");
      let sentenceIndex = 0;

      const highlightWords = (sentence, wordIndex) => {
        const words = sentence.dataset.sentence.split(" ");
        sentence.innerHTML = words
          .map((word, idx) =>
            idx === wordIndex
              ? `<span class="highlight word" onclick="readWord(this)">${word}</span>`
              : `<span class="word" onclick="readWord(this)">${word}</span>`
          )
          .join(" ");
      };

      const speakSentence = () => {
        if (sentenceIndex >= sentences.length) return;

        const currentSentence = sentences[sentenceIndex];
        const words = currentSentence.dataset.sentence.split(" ");
        const speech = new SpeechSynthesisUtterance(currentSentence.dataset.sentence);

        let wordIndex = 0;
        speech.voice = sentenceIndex === 1 ? maleVoice : femaleVoice;

        speech.onboundary = (event) => {
          if (event.name === "word") {
            highlightWords(currentSentence, wordIndex);
            wordIndex++;
          }
        };

        speech.onend = () => {
          currentSentence.innerHTML = words
            .map(word => `<span class="word" onclick="readWord(this)">${word}</span>`)
            .join(" ");
          sentenceIndex++;
          speakSentence();
        };

        window.speechSynthesis.speak(speech);
      };

      speakSentence();
    }

    function playAnswerAudio() {
      const section = document.getElementById("answer-section");
      const words = Array.from(section.querySelectorAll(".word, .green-text"));
      const utterance = new SpeechSynthesisUtterance();
      let wordIndex = 0;

      utterance.text = words.map(word => word.innerText).join(" ");
      utterance.lang = "en-US";
      utterance.rate = 0.9;

      utterance.onboundary = (event) => {
        if (event.name === "word") {
          words.forEach((word, index) => {
            word.classList.toggle("highlight", index === wordIndex);
          });
          wordIndex++;
        }
      };

      utterance.onend = () => {
        words.forEach(word => word.classList.remove("highlight"));
      };

      window.speechSynthesis.speak(utterance);
    }

    function readWord(element) {
      const word = element.innerText;
      const utterance = new SpeechSynthesisUtterance(word);
      utterance.lang = "en-US";
      utterance.rate = 1;

      element.classList.add("clicked-highlight");
      utterance.onend = () => element.classList.remove("clicked-highlight");

      window.speechSynthesis.speak(utterance);
    }

    function readWordImage(word) {
      const utterance = new SpeechSynthesisUtterance(word);
      utterance.lang = "en-US";
      utterance.rate = 1;

      window.speechSynthesis.speak(utterance);
    }
  </script>
</body>
</html>