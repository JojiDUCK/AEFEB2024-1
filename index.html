<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lexend Font with Word Highlighting</title>
  <!-- Google Fonts for Lexend -->
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Lexend', sans-serif;
      background-color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    .header-container {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
    }

    .centered-text {
      font-size: 25px;
      text-align: center;
      margin: 0 20px;
    }

    .image {
      width: 50px;
      height: 50px;
      object-fit: cover;
    }

    .content-section {
      width: 100%;
      max-width: 600px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }

    .sentence-container,
    .follow-up-container,
    .final-container {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .sentence-image, .follow-up-image, .final-image {
      width: 40px;
      height: 40px;
      margin-right: 10px;
      object-fit: cover;
    }

    .sentence, .follow-up-sentence, .final-sentence {
      font-size: 20px;
      text-align: left;
    }

    .highlight {
      background-color: yellow;
      transition: background-color 0.2s ease;
    }

    .section-heading {
      font-size: 22px;
      font-weight: bold;
      margin-top: 20px;
      text-align: left;
    }

    .audio-button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      align-self: center;
    }

    .audio-button:hover {
      background-color: #45a049;
    }

    .question-block {
      margin-top: 20px;
      font-size: 20px;
      line-height: 1.6;
      text-align: left;
    }

    .answers {
      margin-left: 20px;
      display: flex;
      justify-content: space-between;
      gap: 20px;
    }

    .answers span {
      font-weight: bold;
    }

    .green-text {
      color: green;
    }

    .word-list {
      margin-top: 20px;
      width: 100%;
      position: relative;
    }

    .word-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      font-size: 20px;
    }

    .word-item img {
      width: 50px;
      height: 50px;
      object-fit: cover;
    }

    .line {
      position: absolute;
      top: 50%;
      left: 0;
      width: 100%;
      height: 0;
      pointer-events: none;
    }

    line {
      stroke: black;
      stroke-width: 2;
    }
  </style>
</head>
<body>
  <!-- Header Section -->
  <div class="header-container">
    <img src="https://raw.githubusercontent.com/JojiDUCK/AEFEB2024-1/main/lion.png" alt="Left Image" class="image">
    <div class="centered-text">Have you...</div>
    <img src="https://raw.githubusercontent.com/JojiDUCK/AEFEB2024-1/main/panda.png" alt="Right Image" class="image">
  </div>

  <!-- Content Section -->
  <div class="content-section" id="text-to-read">
    <div class="sentence-container">
      <img src="https://raw.githubusercontent.com/JojiDUCK/AEFEB2024-1/main/jan.png" alt="Jan Image" class="sentence-image">
      <div class="sentence" data-sentence="Sam, have you ever seen a panda in a zoo?">
        Sam, have you ever seen a panda in a zoo?
      </div>
    </div>
    <div class="follow-up-container">
      <div class="sentence" data-sentence="Yes, I have, but I have never seen a panda in the forest.">
        Yes, I have, but I have never seen a panda in the forest.
      </div>
      <img src="https://raw.githubusercontent.com/JojiDUCK/AEFEB2024-1/main/sam.png" alt="Sam Image" class="follow-up-image">
    </div>
    <div class="final-container">
      <img src="https://raw.githubusercontent.com/JojiDUCK/AEFEB2024-1/main/jan.png" alt="Jan Image" class="final-image">
      <div class="sentence" data-sentence="Me too! I want to see one in the wild.">
        Me too! I want to see one in the wild.
      </div>
    </div>
  </div>

  <!-- Audio Button -->
  <button class="audio-button" onclick="readAndHighlight()">Play Audio</button>

  <!-- Question Section -->
  <div class="section-heading">Answer the questions.</div>
  <div class="question-block">
    <div class="question">
      1. What has Sam seen?
      <div class="answers">
        <span>a. <span class="green-text">panda</span></span>
        <span>b. dinosaur</span>
        <span>c. dog</span>
      </div>
      <div class="explanation">Sam has seen a panda.</div>
    </div>
    <div class="question">
      2. What has Jan never seen?
      <div class="answers">
        <span>a. <span class="green-text">a panda in the wild</span></span>
        <span>b. a cat in the wild</span>
        <span>c. a rabbit in the wild</span>
      </div>
      <div class="explanation">Jan has never seen a panda in the wild.</div>
    </div>
  </div>

  <!-- Unscramble Section -->
  <div class="section-heading">Unscramble, spell, and match.</div>
  <div class="word-list">
    <div class="word-item">
      <div>dog</div>
      <img src="https://raw.githubusercontent.com/JojiDUCK/AEFEB2024-1/main/dog.png" alt="Dog">
    </div>
    <div class="word-item">
      <div>snake</div>
      <img src="https://raw.githubusercontent.com/JojiDUCK/AEFEB2024-1/main/snake.png" alt="Snake">
    </div>
    <div class="word-item">
      <div>tiger</div>
      <img src="https://raw.githubusercontent.com/JojiDUCK/AEFEB2024-1/main/tiger.png" alt="Tiger">
    </div>
    <div class="word-item">
      <div>mantis</div>
      <img src="https://raw.githubusercontent.com/JojiDUCK/AEFEB2024-1/main/mantis.png" alt="Mantis">
    </div>
  </div>

  <script>
    function readAndHighlight() {
      const textContainer = document.getElementById("text-to-read");
      const sentences = Array.from(textContainer.querySelectorAll(".sentence"));
      const fullText = sentences.map(sentence => sentence.dataset.sentence).join(" ");
      const speech = new SpeechSynthesisUtterance(fullText);

      let wordIndex = 0;
      let allWords = [];
      let sentenceBoundaries = [];
      let currentSentenceIndex = 0;

      // Prepare all words and sentence boundaries
      sentences.forEach((sentence, index) => {
        const words = sentence.dataset.sentence.split(" ");
        sentenceBoundaries.push({ start: allWords.length, end: allWords.length + words.length });
        allWords = allWords.concat(words);
      });

      const highlightWord = () => {
        sentences.forEach((sentence, index) => {
          const words = sentence.dataset.sentence.split(" ");
          if (index === currentSentenceIndex) {
            sentence.innerHTML = words
              .map((word, i) => (i === wordIndex - sentenceBoundaries[index].start ? `<span class="highlight">${word}</span>` : word))
              .join(" ");
          } else {
            sentence.innerHTML = words.join(" ");
          }
        });
      };

      speech.onboundary = (event) => {
        if (event.name === "word") {
          highlightWord();
          wordIndex++;
          if (wordIndex >= sentenceBoundaries[currentSentenceIndex]?.end) {
            currentSentenceIndex++;
            wordIndex = sentenceBoundaries[currentSentenceIndex]?.start || wordIndex;
          }
        }
      };

      speech.onend = () => {
        sentences.forEach(sentence => sentence.innerHTML = sentence.dataset.sentence);
      };

      speech.lang = "en-US";
      speech.rate = 1;
      speech.pitch = 1;
      window.speechSynthesis.speak(speech);
    }
  </script>
</body>
</html>